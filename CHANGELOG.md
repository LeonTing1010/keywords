# 变更日志

本项目仅记录每个版本的重大变更。

## [Unreleased]

### 多Agent协作增强
- 新增Agent间状态共享机制：实现高效数据共享，避免重复计算
- 添加Agent失败恢复机制：智能错误识别和恢复策略，提高系统健壮性
- 引入Agent自适应调度：基于系统资源和任务优先级动态调整工作流执行
- 实现增强型Agent基类：集成状态共享、失败恢复和性能优化能力
- 创建自适应关键词分析工作流：支持动态路由和资源自适应执行

### LangGraph兼容性修复
- 修复所有TypeScript类型错误，确保与@langchain/langgraph 0.0.8版本兼容
- 更新BaseAgent.ts，移除过时的StateGraphArgs导入，改进createGraphNode方法实现
- 重构KeywordAnalysisGraph.ts，使用最新的StateGraph API格式
- 优化内容模板处理，修复ContentAgent和KeywordAgent中的数组参数问题
- 添加更健壮的错误处理和JSON解析逻辑
- 提供analyze-langgraph-fix.sh脚本作为临时解决方案

### 多Agent架构实现
- 完成多Agent协作架构的具体实现，提供更高效、更可扩展的系统
- 实现标准化的Agent基类和接口设计，方便扩展和定制Agent
- 开发Agent协调器(AgentCoordinator)，支持工作流编排和Agent协作
- 实现工具注册中心(ToolRegistry)，为所有Agent提供共享能力
- 新增统一的Agent数据交换格式规范，提高系统一致性和可维护性
- 添加错误处理、重试机制和缓存系统，提高系统健壮性
- 支持工作流并行执行，大幅提升分析效率

### 专业化Agent实现
- 完成KeywordAgent实现，负责关键词挖掘和需求发现
- 完成JourneyAgent实现，负责模拟用户搜索行为和路径分析
- 完成ContentAgent实现，负责内容质量评估和未满足需求识别
- 完成ReportAgent实现，负责整合分析结果，生成分析报告
- 实现Agent间智能通信和数据传递，避免冗余分析

### 工具增强
- 开发SearchSuggestionTool，提供搜索建议和关键词挖掘能力
- 开发SearchResultsTool，提供高质量搜索结果获取能力
- 开发ContentAnalysisTool，提供内容质量和相关性分析能力
- 开发ReportGenerationTool，提供分析报告自动生成能力
- 实现工具注册和动态加载机制，支持灵活配置

### 基础设施升级
- 添加可配置的日志系统，支持多级别和多目标日志记录
- 优化配置管理，支持多环境配置和动态加载
- 强化异常处理，增加详细的错误信息和追踪能力
- 改进数据存储接口，支持多种存储后端
- 添加性能指标收集，为后续优化提供依据

### 性能优化
- 实现Agent结果缓存，减少重复计算
- 引入并行Agent执行，提高分析速度
- 优化LLM调用策略，减少不必要的API请求
- 实现资源自适应分配，提高系统资源利用效率
- 添加懒加载和按需初始化，减少启动时间

### 用户体验改进
- 增强CLI界面，提供更友好的命令行交互
- 添加进度报告，实时展示分析进度
- 优化输出格式，支持多种报告格式(Markdown, JSON等)
- 添加分析结果可视化，提供更直观的数据展示
- 改进错误提示，提供更清晰的问题诊断信息

### CLI工具升级
- 完全重构命令行工具，支持更多高级功能和参数
- 新增批量分析命令，支持多关键词并发分析
- 添加标准工作流和快速工作流模式，适应不同分析场景
- 支持分析报告输出目录配置，便于批量处理

### 架构升级
- 重构为基于多Agent协作的架构，提高可扩展性和功能模块化
- 添加Agent系统核心组件，包括协调器、通信机制和工具库
- 设计专业化Agent角色，包括关键词挖掘Agent、用户旅程Agent、内容分析Agent和报告生成Agent
- 优化Agent间数据交互与协作流程

### 项目重命名
- 项目由KeywordIntent更名为NeedMiner，反映核心价值转变

### 新增
- 添加内容分析器(ContentAnalyzer)，用于评估搜索结果内容质量，识别未满足需求
- 增加未满足需求验证功能，识别互联网上尚未被有效解决的真实需求
- 为每个未满足需求提供简化解决方案和冷启动MVP方案，帮助快速验证需求价值
- 新增JSON强制执行LLM提供程序，提高API响应解析稳定性
- 添加关键词报告服务，优化报告生成流程
- 增强日志系统，支持更详细的调试信息

### 变更
- 核心价值从SEO优化转变为未满足需求挖掘与价值验证
- 调整了Markdown报告生成器，更专注于未满足需求分析和冷启动方案
- 系统架构文档从docs/core/architecture.md移动到docs/architecture/architecture.md，优化文档结构
- 默认搜索引擎从百度改为Google，适应更广泛的国际市场

### 移除
- 移除了可视化HTML报告（VisualReporter）相关功能和所有相关代码。
- 移除了命令行参数 `--visual-report` 和 `--report-theme`。
- 现在仅支持Markdown报告输出。
- 移除了未使用的 playwright.config.ts 文件，不影响系统功能。

## [3.3.0] - 2024-05-15

### 新增
- 添加可视化报告系统（VisualReporter），支持交互式HTML分析报告和多种图表类型。
- 实现全面日志系统，支持多级别日志记录和上下文追踪。

### 变更
- 重构LLM服务中心，简化核心功能，优化错误处理。
- 扩展CLI参数，支持更多分析和报告选项。

## [3.2.0] - 2023-12-05

### 简化
- 优化系统架构，聚焦关键词发现和用户旅程模拟两大核心功能。
- 移除非核心分析模块和冗余命令行参数。

## [3.1.0] - 2023-11-15

### 变更
- 默认搜索引擎由Google改为百度，更适合中文分析。
- 精简命令行参数，提升易用性。

## [3.0.0] - 2023-10-15

### 项目重命名
- 项目由KeywordNova更名为KeywordIntent。

### 新增
- 用户旅程模拟、垂直领域专家系统、跨领域分析、关键词价值预测等核心功能。
- 统一LLM服务中心和工作流控制器。

## [2.0.0] - 2023-05-10

### 新增
- 集成大语言模型(LLM)进行关键词意图和价值分析。
- 支持多轮迭代挖掘和百度搜索引擎。

## [1.0.0] - 2023-01-15

### 首次发布
- 支持Google自动补全关键词挖掘和基本意图分析。
- 命令行界面，JSON格式输出。

## [0.4.2] - 2023-11-28

### 改进
- **LLM服务增强**:
  - 统一了千问和OpenAI模型的API请求格式，使用标准OpenAI格式
  - 移除了兼容模式判断，简化了API调用流程
  - 优化了各种模型API端点的处理逻辑
  - 大幅提升了JSON响应解析能力，支持解析Markdown代码块格式的返回
  - 添加了多层次的JSON解析策略，更加健壮地处理异常返回

### 修复
- 修复了千问API返回Markdown格式JSON时解析失败的问题
- 修复了API端点路径重复添加的问题
